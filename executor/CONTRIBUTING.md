# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹ HFI (HTTP Fault Injection) é¡¹ç›®çš„å…´è¶£ï¼æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•å‚ä¸é¡¹ç›®å¼€å‘å’Œè´¡çŒ®ä»£ç ã€‚

## ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®

### å…ˆå†³æ¡ä»¶

- Go 1.24+
- Rust 1.89+
- Docker 20.10+
- kubectl (å¯é€‰ï¼Œç”¨äº Kubernetes æµ‹è¯•)

### å¿«é€Ÿå¼€å§‹

```bash
# 1. Fork å’Œå…‹éš†é¡¹ç›®
git clone https://github.com/your-username/hfi.git
cd hfi

# 2. æ£€æŸ¥å¼€å‘ç¯å¢ƒ
make setup

# 3. æ„å»ºæ‰€æœ‰ç»„ä»¶
make build-all

# 4. è¿è¡Œæµ‹è¯•
make test

# 5. å¯åŠ¨æœ¬åœ°ç¯å¢ƒ
make run-local
```

è¯¦ç»†çš„ç¯å¢ƒæ­å»ºè¯·å‚è€ƒ [å¼€å‘æ–‡æ¡£](docs/dev_doc/DEVELOPMENT.md)ã€‚

## ğŸ“‹ è´¡çŒ®ç±»å‹

æˆ‘ä»¬æ¬¢è¿ä»¥ä¸‹ç±»å‹çš„è´¡çŒ®ï¼š

### ğŸ› Bug æŠ¥å‘Š
- ä½¿ç”¨ [Bug æŠ¥å‘Šæ¨¡æ¿](.github/ISSUE_TEMPLATE/bug_report.md)
- æä¾›è¯¦ç»†çš„å¤ç°æ­¥éª¤
- åŒ…å«ç¯å¢ƒä¿¡æ¯å’Œæ—¥å¿—

### âœ¨ åŠŸèƒ½è¯·æ±‚
- ä½¿ç”¨ [åŠŸèƒ½è¯·æ±‚æ¨¡æ¿](.github/ISSUE_TEMPLATE/feature_request.md)
- æè¿°ä½¿ç”¨åœºæ™¯å’Œé¢„æœŸè¡Œä¸º
- è€ƒè™‘å‘åå…¼å®¹æ€§

### ğŸ“ æ–‡æ¡£æ”¹è¿›
- ä¿®å¤æ–‡æ¡£é”™è¯¯
- æ·»åŠ ç¤ºä¾‹å’Œæ•™ç¨‹
- æ”¹è¿› API æ–‡æ¡£

### ğŸ”§ ä»£ç è´¡çŒ®
- ä¿®å¤ Bug
- å®ç°æ–°åŠŸèƒ½
- æ€§èƒ½ä¼˜åŒ–
- é‡æ„å’Œä»£ç è´¨é‡æ”¹è¿›

## ğŸ”„ å¼€å‘æµç¨‹

### 1. åˆ›å»ºåˆ†æ”¯

```bash
# ä» main åˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name

# æˆ–è€…ä¿®å¤åˆ†æ”¯
git checkout -b fix/your-bug-fix
```

### 2. å¼€å‘å’Œæµ‹è¯•

```bash
# å¼€å‘è¿‡ç¨‹ä¸­æŒç»­è¿è¡Œæµ‹è¯•
make test

# ä»£ç æ ¼å¼åŒ–
make fmt

# ä»£ç æ£€æŸ¥
make lint

# å®Œæ•´éªŒè¯
make verify
```

### 3. æäº¤ä»£ç 

éµå¾ª [Conventional Commits](https://conventionalcommits.org/) è§„èŒƒï¼š

```bash
# åŠŸèƒ½å¼€å‘
git commit -m "feat(control-plane): add policy validation"

# Bug ä¿®å¤
git commit -m "fix(wasm-plugin): handle empty response headers"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: update installation guide"

# é‡æ„
git commit -m "refactor(cli): simplify command structure"

# æµ‹è¯•
git commit -m "test(storage): add etcd integration tests"
```

### 4. åˆ›å»º Pull Request

- æ¨é€åˆ†æ”¯åˆ°æ‚¨çš„ fork
- åˆ›å»º Pull Request åˆ° main åˆ†æ”¯
- å¡«å†™ PR æ¨¡æ¿
- ç¡®ä¿ CI é€šè¿‡

## ğŸ“ ä»£ç è§„èŒƒ

### Go ä»£ç è§„èŒƒ

```bash
# æ ¼å¼åŒ–ä»£ç 
go fmt ./...

# ä»£ç æ£€æŸ¥
go vet ./...

# ä½¿ç”¨ golangci-lint (æ¨è)
golangci-lint run

# æˆ–ä½¿ç”¨ Makefile
make fmt
make lint
```

**ä»£ç é£æ ¼**ï¼š
- éµå¾ª [Go Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments)
- ä½¿ç”¨ `gofmt` æ ¼å¼åŒ–ä»£ç 
- å‡½æ•°å’Œæ–¹æ³•æ·»åŠ æ³¨é‡Š
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å

### Rust ä»£ç è§„èŒƒ

```bash
# æ ¼å¼åŒ–ä»£ç 
cargo fmt

# ä»£ç æ£€æŸ¥
cargo clippy -- -D warnings

# æˆ–ä½¿ç”¨ Makefile
make fmt
make lint
```

**ä»£ç é£æ ¼**ï¼š
- éµå¾ª [Rust API Guidelines](https://rust-lang.github.io/api-guidelines/)
- ä½¿ç”¨ `rustfmt` æ ¼å¼åŒ–ä»£ç 
- æ·»åŠ é€‚å½“çš„æ–‡æ¡£æ³¨é‡Š
- å¤„ç†æ‰€æœ‰ `Result` ç±»å‹

### æ–‡æ¡£è§„èŒƒ

- ä½¿ç”¨ Markdown æ ¼å¼
- æ·»åŠ ç›®å½•å’Œå¯¼èˆª
- åŒ…å«ä»£ç ç¤ºä¾‹
- ä¿æŒä¸­è‹±æ–‡ä¸€è‡´æ€§

## ğŸ§ª æµ‹è¯•æŒ‡å—

### å•å…ƒæµ‹è¯•

```bash
# Go æµ‹è¯•
make test-go

# Rust æµ‹è¯•
make test-rust

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
make coverage
```

### é›†æˆæµ‹è¯•

```bash
# è¿è¡Œé›†æˆæµ‹è¯•
make integration-test

# æ‰‹åŠ¨è¿è¡Œ
make run-local
cd control-plane
go test -tags=integration ./integration_test.go
```

### æµ‹è¯•è¦æ±‚

- **æ–°åŠŸèƒ½**ï¼šå¿…é¡»åŒ…å«å•å…ƒæµ‹è¯•
- **Bug ä¿®å¤**ï¼šæ·»åŠ å›å½’æµ‹è¯•
- **API å˜æ›´**ï¼šæ›´æ–°é›†æˆæµ‹è¯•
- **è¦†ç›–ç‡**ï¼šä¿æŒåœ¨ 80% ä»¥ä¸Š

## ğŸ“ æ–‡æ¡£è´¡çŒ®

### æ–‡æ¡£ç»“æ„

```
docs/
â”œâ”€â”€ dev_doc/           # å¼€å‘è€…æ–‡æ¡£
â”‚   â”œâ”€â”€ DEVELOPMENT.md # å¼€å‘ç¯å¢ƒæŒ‡å—
â”‚   â”œâ”€â”€ ARCHITECTURE.md # æ¶æ„æ–‡æ¡£
â”‚   â””â”€â”€ design_doc/    # è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ user_doc/          # ç”¨æˆ·æ–‡æ¡£
â”‚   â”œâ”€â”€ QUICKSTART.md  # å¿«é€Ÿå¼€å§‹
â”‚   â””â”€â”€ examples/      # ç¤ºä¾‹
â””â”€â”€ api/               # API æ–‡æ¡£
```

### æ–‡æ¡£æ›´æ–°æµç¨‹

1. æ›´æ–°ç›¸å…³æ–‡æ¡£
2. è¿è¡Œæ–‡æ¡£æ£€æŸ¥ï¼š`make docs-check`
3. æœ¬åœ°é¢„è§ˆï¼š`make docs-serve`
4. æäº¤æ–‡æ¡£å˜æ›´

## ğŸ” ä»£ç å®¡æŸ¥

### å®¡æŸ¥æ¸…å•

**åŠŸèƒ½æ€§**ï¼š
- [ ] åŠŸèƒ½æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ
- [ ] é”™è¯¯å¤„ç†æ˜¯å¦å®Œæ•´
- [ ] è¾¹ç•Œæ¡ä»¶æ˜¯å¦è€ƒè™‘

**ä»£ç è´¨é‡**ï¼š
- [ ] ä»£ç é£æ ¼æ˜¯å¦ä¸€è‡´
- [ ] å‘½åæ˜¯å¦æ¸…æ™°
- [ ] æ˜¯å¦æœ‰é‡å¤ä»£ç 

**æµ‹è¯•**ï¼š
- [ ] æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¶³å¤Ÿ
- [ ] æµ‹è¯•æ˜¯å¦æœ‰æ„ä¹‰
- [ ] é›†æˆæµ‹è¯•æ˜¯å¦é€šè¿‡

**æ–‡æ¡£**ï¼š
- [ ] API æ–‡æ¡£æ˜¯å¦æ›´æ–°
- [ ] é…ç½®å˜æ›´æ˜¯å¦æ–‡æ¡£åŒ–
- [ ] ç¤ºä¾‹æ˜¯å¦æ­£ç¡®

### å®¡æŸ¥æµç¨‹

1. **è‡ªæ£€**ï¼šæäº¤å‰è‡ªå·±å®¡æŸ¥ä»£ç 
2. **CI æ£€æŸ¥**ï¼šç¡®ä¿æ‰€æœ‰æ£€æŸ¥é€šè¿‡
3. **åŒè¡Œå®¡æŸ¥**ï¼šç­‰å¾…ç»´æŠ¤è€…å®¡æŸ¥
4. **ä¿®æ”¹å®Œå–„**ï¼šæ ¹æ®åé¦ˆä¿®æ”¹
5. **åˆå¹¶**ï¼šå®¡æŸ¥é€šè¿‡ååˆå¹¶

## ğŸš€ å‘å¸ƒæµç¨‹

### ç‰ˆæœ¬å·è§„èŒƒ

éµå¾ª [Semantic Versioning](https://semver.org/)ï¼š

- `MAJOR.MINOR.PATCH`
- **MAJOR**ï¼šä¸å…¼å®¹çš„ API å˜æ›´
- **MINOR**ï¼šå‘åå…¼å®¹çš„åŠŸèƒ½æ·»åŠ 
- **PATCH**ï¼šå‘åå…¼å®¹çš„é—®é¢˜ä¿®å¤

### å‘å¸ƒæ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] CHANGELOG å·²æ›´æ–°
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] Docker é•œåƒå·²æ„å»º
- [ ] å‘å¸ƒè¯´æ˜å·²å‡†å¤‡

## ğŸ†˜ è·å–å¸®åŠ©

### ç¤¾åŒºæ”¯æŒ

- **GitHub Issues**ï¼šæŠ¥å‘Š Bug å’ŒåŠŸèƒ½è¯·æ±‚
- **GitHub Discussions**ï¼šç¤¾åŒºè®¨è®ºå’Œé—®ç­”
- **æ–‡æ¡£**ï¼šæŸ¥çœ‹è¯¦ç»†æ–‡æ¡£å’Œç¤ºä¾‹

### è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…ï¼š[@your-username](https://github.com/your-username)
- é‚®ä»¶åˆ—è¡¨ï¼šhfi-dev@your-org.com
- Slack é¢‘é“ï¼š#hfi-development

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

è´¡çŒ®ä»£ç å³è¡¨ç¤ºæ‚¨åŒæ„å°†æ‚¨çš„è´¡çŒ®æŒ‰ç…§ç›¸åŒè®¸å¯è¯æˆæƒã€‚

---

æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼ğŸ‰
