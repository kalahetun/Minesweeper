# 延迟阶段故障策略
# 功能：在请求处理一段时间后再注入故障
# 场景：模拟请求处理中后期的故障（如数据库超时）

metadata:
  name: "late-stage-fault-policy"
spec:
  rules:
    - match:
        method:
          exact: "POST"
        path:
          exact: "/api/orders"
      fault:
        percentage: 20           # 20% 概率触发
        start_delay_ms: 500      # 请求到达 500ms 后才执行故障
        duration_seconds: 0      # 无限期有效
        delay:
          fixed_delay: "2000ms"  # 额外延迟 2 秒
