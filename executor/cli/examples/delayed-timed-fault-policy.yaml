# 延迟+时间限制组合故障策略
# 功能：结合 start_delay_ms 和 duration_seconds
# 场景：在特定时间窗口内模拟请求处理中期的故障

metadata:
  name: "delayed-timed-fault-policy"
spec:
  rules:
    - match:
        method:
          exact: "POST"
        path:
          exact: "/api/predict"
      fault:
        percentage: 30           # 30% 概率触发
        start_delay_ms: 200      # 请求到达 200ms 后执行
        duration_seconds: 60     # 1 分钟后自动过期
        abort:
          httpStatus: 503
